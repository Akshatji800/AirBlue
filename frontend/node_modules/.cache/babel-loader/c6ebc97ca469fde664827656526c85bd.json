{"ast":null,"code":"var _jsxFileName = \"/home/akshat/AirBlue/frontend/src/views/product/CouponList.jsx\";\nimport React from \"react\";\nimport \"./Coupon.css\";\nimport { useQuery, gql, useMutation } from \"@apollo/client\";\n\nconst CouponList = props => {\n  var path = window.location.pathname;\n  var n = path.lastIndexOf(\"/\");\n  var user = path.substring(n + 1);\n  console.log(props);\n  const LOAD_USER_COUPONS = gql`\n    query couponInfo(\n        $id: Int!\n        ){\n          couponInfo(\n            id: $id\n        ) {\n            used\n        }\n    }`;\n  const CHANGE_COUPON_STATUS = gql`\n    mutation useCoupon(\n        $id: Int!\n        ){\n          useCoupon(\n            input:{\n              id: $id\n            }\n        ) {\n          couponChange {\n            miles\n          }\n        }\n    }\n    `;\n  const INCREASE_USER_MILES = gql`\n    mutation increseMiles(\n        $miles: Int!\n        $user: String!\n        ){\n          increseMiles(\n            input: {\n              miles: $miles\n            user: $user\n            }\n        ) {\n          milesDetails {\n          miles\n        }\n        }\n    }`;\n  const {\n    data,\n    loading,\n    error\n  } = useQuery(LOAD_USER_COUPONS, {\n    variables: {\n      id: props.id\n    }\n  });\n\n  if (data != undefined) {\n    console.log(data.couponInfo[0]['used']);\n  }\n\n  const [changeCoupon, {\n    cdata,\n    cloading,\n    cerror\n  }] = useMutation(CHANGE_COUPON_STATUS);\n  const [increseMiles, {\n    idata,\n    iloading,\n    ierror\n  }] = useMutation(INCREASE_USER_MILES);\n\n  const SubmitHandler = e => {\n    e.preventDefault();\n    changeCoupon({\n      variables: {\n        id: props.id\n      }\n    });\n    increseMiles({\n      variables: {\n        miles: props.value,\n        user: user\n      }\n    });\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"containers\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-md-6\",\n    id: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 10\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://www.freepnglogos.com/uploads/plane-png/png-jet-plane-transparent-jet-plane-images-pluspng-34.png\",\n    alt: \"\",\n    id: \"plane\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 44\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"info\",\n    class: \"pt-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"mobile-plane\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://www.freepnglogos.com/uploads/plane-png/png-jet-plane-transparent-jet-plane-images-pluspng-34.png\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 41\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \"Get\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"offer font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 53\n    }\n  }, \" \", props.value, \" AirMiles\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, \"on\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"Redeem\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"pt-5 coupon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 43\n    }\n  }, \"coupon valid for One Month\"), \" \"), data != undefined && !data.couponInfo[0]['used'] ? /*#__PURE__*/React.createElement(\"div\", {\n    class: \"btns rounded mt-3\",\n    onClick: SubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, \"REDEEM NOW\") : /*#__PURE__*/React.createElement(\"div\", {\n    class: \"btns rounded mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, \"ALREADY USED\"))))));\n};\n\nexport default CouponList;","map":{"version":3,"sources":["/home/akshat/AirBlue/frontend/src/views/product/CouponList.jsx"],"names":["React","useQuery","gql","useMutation","CouponList","props","path","window","location","pathname","n","lastIndexOf","user","substring","console","log","LOAD_USER_COUPONS","CHANGE_COUPON_STATUS","INCREASE_USER_MILES","data","loading","error","variables","id","undefined","couponInfo","changeCoupon","cdata","cloading","cerror","increseMiles","idata","iloading","ierror","SubmitHandler","e","preventDefault","miles","value","reload"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport \"./Coupon.css\";\nimport {\n    useQuery,\n    gql,\n    useMutation\n  } from \"@apollo/client\";\n\nconst CouponList = (props) => {\n    var path = window.location.pathname\n    var n = path.lastIndexOf(\"/\");\n    var user = path.substring(n+1);\n    console.log(props);\n\n\n    const LOAD_USER_COUPONS = gql`\n    query couponInfo(\n        $id: Int!\n        ){\n          couponInfo(\n            id: $id\n        ) {\n            used\n        }\n    }`\n\n    const CHANGE_COUPON_STATUS = gql`\n    mutation useCoupon(\n        $id: Int!\n        ){\n          useCoupon(\n            input:{\n              id: $id\n            }\n        ) {\n          couponChange {\n            miles\n          }\n        }\n    }\n    `\n\n    const INCREASE_USER_MILES = gql`\n    mutation increseMiles(\n        $miles: Int!\n        $user: String!\n        ){\n          increseMiles(\n            input: {\n              miles: $miles\n            user: $user\n            }\n        ) {\n          milesDetails {\n          miles\n        }\n        }\n    }`\n\n\n    const { data, loading, error } = useQuery(LOAD_USER_COUPONS , {\n        variables: {id: props.id}\n      });\n      if(data!=undefined){\n        console.log(data.couponInfo[0]['used']);\n      }\n    \n\n      const [changeCoupon, { cdata, cloading,cerror }] = useMutation(CHANGE_COUPON_STATUS);\n\n      const [increseMiles, { idata, iloading,ierror }] = useMutation(INCREASE_USER_MILES);\n\n      const SubmitHandler = (e)=> {e.preventDefault();\n\n      changeCoupon({\n        variables: {\n          id: props.id,\n        },\n      });\n\n      increseMiles({\n        variables: {\n          miles: props.value,\n          user: user,\n        },\n      });\n\n      \n      window.location.reload();\n    }\n      \n\n    return <React.Fragment>\n        <div class=\"containers\">\n    <div class=\"row\">\n         <div class=\"col-md-6\" id=\"image\"> <img src=\"https://www.freepnglogos.com/uploads/plane-png/png-jet-plane-transparent-jet-plane-images-pluspng-34.png\" alt=\"\" id=\"plane\"/> </div>\n        <div class=\"col-md-6\">\n            <div id=\"info\" class=\"pt-md-4\">\n                <div id=\"mobile-plane\"> <img src=\"https://www.freepnglogos.com/uploads/plane-png/png-jet-plane-transparent-jet-plane-images-pluspng-34.png\" alt=\"\"/> </div>\n                <div class=\"h4\">Get</div>\n                <div class=\"offer font-weight-bold\"><i> {props.value} AirMiles</i></div>\n                <div class=\"h4\">on</div>\n                <div class=\"h4\">Redeem</div>\n                <div class=\"pt-5 coupon\"> <i>coupon valid for One Month</i> </div>{\n                   (data!=undefined && !data.couponInfo[0]['used']) ? \n                <div class=\"btns rounded mt-3\" onClick={SubmitHandler}>REDEEM NOW</div>\n                :\n                <div class=\"btns rounded mt-3\">ALREADY USED</div> \n                }\n            \n            </div>\n        </div>\n    </div>\n</div>\n    </React.Fragment>\n}\n\nexport default CouponList;"]},"metadata":{},"sourceType":"module"}