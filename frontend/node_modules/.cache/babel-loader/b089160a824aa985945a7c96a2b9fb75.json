{"ast":null,"code":"var _jsxFileName = \"/home/akshat/AirBlue/frontend/src/components/account/SignInForm.jsx\";\nimport React, { useState } from \"react\";\nimport { Field, reduxForm } from \"redux-form\";\nimport { compose } from \"redux\";\nimport { Link } from \"react-router-dom\";\nimport { Redirect } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { useMutation, gql } from \"@apollo/client\";\nimport renderFormGroupField from \"../../helpers/renderFormGroupField\";\nimport { required, maxLength20, minLength8, maxLengthMobileNo, minLengthMobileNo, digit } from \"../../helpers/validation\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTwitter, faFacebookF, faGoogle } from \"@fortawesome/free-brands-svg-icons\";\nimport { ReactComponent as IconPhoneFill } from \"@svgr/webpack?-svgo,+titleProp,+ref!bootstrap-icons/icons/envelope-fill.svg\";\nimport { ReactComponent as IconShieldLockFill } from \"@svgr/webpack?-svgo,+titleProp,+ref!bootstrap-icons/icons/shield-lock-fill.svg\";\n\nconst SignInForm = props => {\n  const {\n    handleSubmit,\n    submitting,\n    onSubmit,\n    submitFailed\n  } = props;\n  const [status, setStatus] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [invalid, setInvalid] = useState(false);\n  const LOAD_USER_lOGIN = gql`\n    mutation tokenAuth(\n        $username: String!\n        $password: String!\n        ){\n        tokenAuth(\n            username: $username\n            password: $password\n        ) {\n            success,\n            errors,\n            token,\n            refreshToken\n        }\n    }\n    `;\n  const [getUser, {\n    data,\n    loading,\n    error\n  }] = useMutation(LOAD_USER_lOGIN);\n\n  const SubmitHandler = e => {\n    e.preventDefault();\n    getUser({\n      variables: {\n        username: username,\n        password: password\n      }\n    });\n\n    if (data != undefined) {\n      if (data.tokenAuth.success) {\n        setStatus(true);\n      } else {\n        setInvalid(true);\n      }\n\n      ;\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: SubmitHandler,\n    className: `needs-validation ${submitFailed ? \"was-validated\" : \"\"}`,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, status ? /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: `/home/${username}`,\n      state: {\n        authenticated: true\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, invalid ? \"Invalid username/password\" : \"\", /*#__PURE__*/React.createElement(Field, {\n    name: \"mobileNo\",\n    type: \"text\",\n    label: \"Username\",\n    component: renderFormGroupField,\n    placeholder: \"Enter your registered username\",\n    icon: IconPhoneFill,\n    validate: [required, maxLengthMobileNo, minLengthMobileNo, digit],\n    required: true,\n    max: \"999999999999999\",\n    min: \"9999\",\n    className: \"mb-3\",\n    onChange: e => {\n      setUsername(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Field, {\n    name: \"password\",\n    type: \"password\",\n    label: \"Your password\",\n    component: renderFormGroupField,\n    placeholder: \"******\",\n    icon: IconShieldLockFill,\n    validate: [required, maxLength20, minLength8],\n    required: true,\n    maxLength: \"20\",\n    minLength: \"8\",\n    className: \"mb-3\",\n    onChange: e => {\n      setPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary btn-block mb-3\",\n    disabled: submitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, \"Log In\"), /*#__PURE__*/React.createElement(Link, {\n    className: \"float-left\",\n    to: \"/account/signup\",\n    title: \"Sign Up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, \"Create your account\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"clearfix\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col- text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-muted small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, \"Or you can join with\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col- text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"btn text-white bg-twitter mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTwitter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"btn text-white mr-3 bg-facebook\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faFacebookF,\n    className: \"mx-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    className: \"btn text-white mr-3 bg-google\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faGoogle,\n    className: \"mx-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }))))));\n};\n\nexport default compose(reduxForm({\n  form: \"signin\"\n}))(SignInForm);","map":{"version":3,"sources":["/home/akshat/AirBlue/frontend/src/components/account/SignInForm.jsx"],"names":["React","useState","Field","reduxForm","compose","Link","Redirect","useMutation","gql","renderFormGroupField","required","maxLength20","minLength8","maxLengthMobileNo","minLengthMobileNo","digit","FontAwesomeIcon","faTwitter","faFacebookF","faGoogle","SignInForm","props","handleSubmit","submitting","onSubmit","submitFailed","status","setStatus","username","setUsername","password","setPassword","invalid","setInvalid","LOAD_USER_lOGIN","getUser","data","loading","error","SubmitHandler","e","preventDefault","variables","undefined","tokenAuth","success","pathname","state","authenticated","IconPhoneFill","target","value","IconShieldLockFill","form"],"mappings":"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","sourcesContent":["import React , {useState} from \"react\";\nimport { Field, reduxForm } from \"redux-form\";\nimport { compose } from \"redux\";\nimport { Link } from \"react-router-dom\";\nimport { Redirect } from \"react-router-dom/cjs/react-router-dom.min\";\nimport {\n  useMutation,\n  gql\n} from \"@apollo/client\";\n\nimport renderFormGroupField from \"../../helpers/renderFormGroupField\";\nimport {\n  required,\n  maxLength20,\n  minLength8,\n  maxLengthMobileNo,\n  minLengthMobileNo,\n  digit,\n} from \"../../helpers/validation\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faTwitter,\n  faFacebookF,\n  faGoogle,\n} from \"@fortawesome/free-brands-svg-icons\";\nimport { ReactComponent as IconPhoneFill } from \"bootstrap-icons/icons/envelope-fill.svg\";\nimport { ReactComponent as IconShieldLockFill } from \"bootstrap-icons/icons/shield-lock-fill.svg\";\n\nconst SignInForm = (props) => {\n  const { handleSubmit, submitting, onSubmit, submitFailed } = props;\n  const [status, setStatus] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [invalid, setInvalid] = useState(false);\n  const LOAD_USER_lOGIN = gql`\n    mutation tokenAuth(\n        $username: String!\n        $password: String!\n        ){\n        tokenAuth(\n            username: $username\n            password: $password\n        ) {\n            success,\n            errors,\n            token,\n            refreshToken\n        }\n    }\n    `\n  const [getUser, { data, loading, error }] = useMutation(LOAD_USER_lOGIN);\n  const SubmitHandler = (e)=> {e.preventDefault(); getUser({\n      variables: {\n        username: username,\n        password: password,\n      },\n    });\n  if(data!=undefined){if(data.tokenAuth.success){\n    setStatus(true);\n  }else{\n    setInvalid(true); \n  };}}\n  \n  return (\n    <form\n      onSubmit={SubmitHandler}\n      className={`needs-validation ${submitFailed ? \"was-validated\" : \"\"}`}\n      noValidate\n    >\n      {status? (\n        <Redirect\n        to={{\n        pathname: `/home/${username}`,\n        state: { authenticated: true }\n      }}\n    />):(\n        <div>\n        {invalid ? \"Invalid username/password\" : \"\"}\n          <Field\n        name=\"mobileNo\"\n        type=\"text\"\n        label=\"Username\"\n        component={renderFormGroupField}\n        placeholder=\"Enter your registered username\"\n        icon={IconPhoneFill}\n        validate={[required, maxLengthMobileNo, minLengthMobileNo, digit]}\n        required={true}\n        max=\"999999999999999\"\n        min=\"9999\"\n        className=\"mb-3\"\n        onChange = {(e)=>{setUsername(e.target.value)}}\n      />\n      <Field\n        name=\"password\"\n        type=\"password\"\n        label=\"Your password\"\n        component={renderFormGroupField}\n        placeholder=\"******\"\n        icon={IconShieldLockFill}\n        validate={[required, maxLength20, minLength8]}\n        required={true}\n        maxLength=\"20\"\n        minLength=\"8\"\n        className=\"mb-3\"\n        onChange = {(e)=>{setPassword(e.target.value)}}\n      />\n      <button\n        type=\"submit\"\n        className=\"btn btn-primary btn-block mb-3\"\n        disabled={submitting}\n      >\n        Log In\n      </button>\n      <Link className=\"float-left\" to=\"/account/signup\" title=\"Sign Up\">\n        Create your account\n      </Link>\n      <div className=\"clearfix\"></div>\n      <hr></hr>\n      <div className=\"row\">\n        <div className=\"col- text-center\">\n          <p className=\"text-muted small\">Or you can join with</p>\n        </div>\n        <div className=\"col- text-center\">\n          <Link to=\"/\" className=\"btn text-white bg-twitter mr-3\">\n            <FontAwesomeIcon icon={faTwitter} />\n          </Link>\n          <Link to=\"/\" className=\"btn text-white mr-3 bg-facebook\">\n            <FontAwesomeIcon icon={faFacebookF} className=\"mx-1\" />\n          </Link>\n          <Link to=\"/\" className=\"btn text-white mr-3 bg-google\">\n            <FontAwesomeIcon icon={faGoogle} className=\"mx-1\" />\n          </Link>\n        </div>\n      </div>\n        </div>\n      )}\n      \n      \n    </form>\n  );\n};\n\nexport default compose(\n  reduxForm({\n    form: \"signin\",\n  })\n)(SignInForm);\n"]},"metadata":{},"sourceType":"module"}