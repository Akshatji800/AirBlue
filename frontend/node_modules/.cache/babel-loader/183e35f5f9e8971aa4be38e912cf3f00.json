{"ast":null,"code":"var _jsxFileName = \"/home/akshat/AirBlue/frontend/src/views/cart/Checkout.jsx\";\nimport React, { useState, Component } from \"react\";\nimport { ReactComponent as IconEnvelope } from \"@svgr/webpack?-svgo,+titleProp,+ref!bootstrap-icons/icons/envelope.svg\";\nimport { ReactComponent as IconTruck } from \"@svgr/webpack?-svgo,+titleProp,+ref!bootstrap-icons/icons/truck.svg\";\nimport { ReactComponent as IconReceipt } from \"@svgr/webpack?-svgo,+titleProp,+ref!bootstrap-icons/icons/receipt.svg\";\nimport { ReactComponent as IconCreditCard2Front } from \"@svgr/webpack?-svgo,+titleProp,+ref!bootstrap-icons/icons/credit-card-2-front.svg\";\nimport { ReactComponent as IconCart3 } from \"@svgr/webpack?-svgo,+titleProp,+ref!bootstrap-icons/icons/cart3.svg\";\nimport { Link } from \"react-router-dom\";\nimport { useMutation, gql } from \"@apollo/client\";\n\nconst CheckoutView = props => {\n  var path = window.location.href;\n  var n = path.lastIndexOf(\"/\");\n  var m = path.lastIndexOf(\"?\");\n  var user = path.substring(n + 1, m);\n  var total = path.substring(m + 1);\n  const EDIT_USER_MILES = gql`\n    mutation updateMiles(\n        $miles: Int!\n        $user: String!\n        ){\n          updateMiles(\n            input: {\n              miles: $miles\n            user: $user\n            }\n        ) {\n          milesDetails {\n          miles\n        }\n        }\n    }\n    `;\n  const SEND_USER_ORDER = gql`\n    mutation createOrder(\n        $item: String!\n        $user: String!\n        $value: Int!\n        ){\n          createOrder(\n            input: {\n              item: $item\n            user: $user\n            value: $value\n            }\n        ) {\n          orderItems {\n            description\n          }\n        }\n    }\n    `;\n  const CLEAR_USER_CART = gql`\n    mutation clearCart(\n        $user: String!\n        ){\n          clearCart(\n            input: {\n            user: $user\n            }\n        ) {\n          cart {\n            name\n          }\n        }\n    }\n    `;\n  const [profileState, setProfileState] = useState(props);\n  console.log(profileState.location.state.authenticated);\n  var itemnames = profileState.location.state.items.join(',');\n  const [editMiles, {\n    data,\n    loading,\n    error\n  }] = useMutation(EDIT_USER_MILES);\n  const [clearCart, {\n    cdata,\n    cloading,\n    cerror\n  }] = useMutation(CLEAR_USER_CART);\n  const [sendData, {\n    sdata,\n    sloading,\n    serror\n  }] = useMutation(SEND_USER_ORDER);\n\n  const edit = () => {\n    editMiles({\n      variables: {\n        miles: total,\n        user: user\n      }\n    });\n    sendData({\n      variables: {\n        item: itemnames,\n        user: user,\n        value: total\n      }\n    });\n    clearCart({\n      variables: {\n        user: user\n      }\n    });\n    window.location.reload(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-secondary border-top p-4 text-white mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"display-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, \"Checkout\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(IconReceipt, {\n    className: \"i-va\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }), \" Billing Infomation\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row g-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Name\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Addresss\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Address 2 (Optional)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-select\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 23\n    }\n  }, \"-- Country --\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 23\n    }\n  }, \"United States\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-select\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 23\n    }\n  }, \"-- State --\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 23\n    }\n  }, \"California\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Zip\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mb-3 border-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header bg-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(IconCreditCard2Front, {\n    className: \"i-va\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }), \" Payment Method\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row g-3 mb-3 border-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"credit\",\n    name: \"paymentMethod\",\n    type: \"radio\",\n    className: \"form-check-input\",\n    defaultChecked: true,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-check-label\",\n    htmlFor: \"credit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 23\n    }\n  }, \"Credit card\", /*#__PURE__*/React.createElement(\"img\", {\n    src: \"../../images/payment/cards.webp\",\n    alt: \"...\",\n    className: \"ml-3\",\n    height: 26,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"paypal\",\n    name: \"paymentMethod\",\n    type: \"radio\",\n    className: \"form-check-input\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-check-label\",\n    htmlFor: \"paypal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 23\n    }\n  }, \"PayPal\", /*#__PURE__*/React.createElement(\"img\", {\n    src: \"../../images/payment/paypal_64.webp\",\n    alt: \"...\",\n    className: \"ml-3\",\n    height: 26,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 25\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"credit\",\n    name: \"paymentMethod\",\n    type: \"radio\",\n    className: \"form-check-input\",\n    defaultChecked: true,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"form-check-label\",\n    htmlFor: \"credit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 23\n    }\n  }, \"AirMiles\", /*#__PURE__*/React.createElement(\"img\", {\n    src: \"../../images/payment/miles.png\",\n    alt: \"...\",\n    className: \"ml-3\",\n    height: 40,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 25\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn btn-block btn-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-block btn-info\",\n    onClick: () => {\n      edit();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: {\n      pathname: `/cart/${user}`,\n      state: {\n        authenticated: true\n      }\n    },\n    className: \"btn btn-block btn-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 17\n    }\n  }, \"Pay Now: \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 28\n    }\n  }, total, \" ams \")))))))));\n};\n\nexport default CheckoutView;","map":{"version":3,"sources":["/home/akshat/AirBlue/frontend/src/views/cart/Checkout.jsx"],"names":["React","useState","Component","Link","useMutation","gql","CheckoutView","props","path","window","location","href","n","lastIndexOf","m","user","substring","total","EDIT_USER_MILES","SEND_USER_ORDER","CLEAR_USER_CART","profileState","setProfileState","console","log","state","authenticated","itemnames","items","join","editMiles","data","loading","error","clearCart","cdata","cloading","cerror","sendData","sdata","sloading","serror","edit","variables","miles","item","value","reload","pathname"],"mappings":"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","sourcesContent":["import React, { useState,Component } from \"react\";\nimport { ReactComponent as IconEnvelope } from \"bootstrap-icons/icons/envelope.svg\";\nimport { ReactComponent as IconTruck } from \"bootstrap-icons/icons/truck.svg\";\nimport { ReactComponent as IconReceipt } from \"bootstrap-icons/icons/receipt.svg\";\nimport { ReactComponent as IconCreditCard2Front } from \"bootstrap-icons/icons/credit-card-2-front.svg\";\nimport { ReactComponent as IconCart3 } from \"bootstrap-icons/icons/cart3.svg\";\nimport { Link } from \"react-router-dom\";\nimport {\n  useMutation,\n  gql\n} from \"@apollo/client\";\n\nconst CheckoutView = props =>{\n  var path = window.location.href\n  var n = path.lastIndexOf(\"/\");\n  var m = path.lastIndexOf(\"?\");\n  var user = path.substring(n+1, m);\n  var total = path.substring(m+1);\n  const EDIT_USER_MILES = gql`\n    mutation updateMiles(\n        $miles: Int!\n        $user: String!\n        ){\n          updateMiles(\n            input: {\n              miles: $miles\n            user: $user\n            }\n        ) {\n          milesDetails {\n          miles\n        }\n        }\n    }\n    `\n\n    const SEND_USER_ORDER = gql`\n    mutation createOrder(\n        $item: String!\n        $user: String!\n        $value: Int!\n        ){\n          createOrder(\n            input: {\n              item: $item\n            user: $user\n            value: $value\n            }\n        ) {\n          orderItems {\n            description\n          }\n        }\n    }\n    `\n\n    const CLEAR_USER_CART = gql`\n    mutation clearCart(\n        $user: String!\n        ){\n          clearCart(\n            input: {\n            user: $user\n            }\n        ) {\n          cart {\n            name\n          }\n        }\n    }\n    `\n    const [profileState, setProfileState] = useState(props);\n    console.log(profileState.location.state.authenticated)\n    var itemnames=profileState.location.state.items.join(',');\n    const [editMiles, { data, loading, error }] = useMutation(EDIT_USER_MILES);\n    const [clearCart, { cdata, cloading, cerror }] = useMutation(CLEAR_USER_CART);\n    const [sendData, { sdata, sloading, serror }] = useMutation(SEND_USER_ORDER);\n\n    const edit = () => {\n      editMiles({variables: {\n        miles: total,\n        user: user\n      }});\n\n      sendData({variables: {\n        item: itemnames,\n        user: user,\n        value: total, \n      }});\n\n      clearCart({variables: {\n        user: user\n      }});\n      window.location.reload(false);\n    }\n  return (\n    <React.Fragment>\n      <div className=\"bg-secondary border-top p-4 text-white mb-3\">\n        <h1 className=\"display-6\">Checkout</h1>\n      </div>\n      <div className=\"container mb-3\">\n        <div className=\"row\">\n          <div className=\"col-md-8\">\n\n            <div className=\"card mb-3\">\n              <div className=\"card-header\">\n                <IconReceipt className=\"i-va\" /> Billing Infomation\n              </div>\n              <div className=\"card-body\">\n                <div className=\"row g-3\">\n                  <div className=\"col-md-12\">\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Name\"\n                      required\n                    />\n                  </div>\n                  <div className=\"col-md-6\">\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Addresss\"\n                      required\n                    />\n                  </div>\n                  <div className=\"col-md-6\">\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Address 2 (Optional)\"\n                    />\n                  </div>\n                  <div className=\"col-md-4\">\n                    <select className=\"form-select\" required>\n                      <option value>-- Country --</option>\n                      <option>United States</option>\n                    </select>\n                  </div>\n                  <div className=\"col-md-4\">\n                    <select className=\"form-select\" required>\n                      <option value>-- State --</option>\n                      <option>California</option>\n                    </select>\n                  </div>\n                  <div className=\"col-md-4\">\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Zip\"\n                      required\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card mb-3 border-info\">\n              <div className=\"card-header bg-info\">\n                <IconCreditCard2Front className=\"i-va\" /> Payment Method\n              </div>\n              <div className=\"card-body\">\n                <div className=\"row g-3 mb-3 border-bottom\">\n                  <div className=\"col-md-6\">\n                    <div className=\"form-check\">\n                      <input\n                        id=\"credit\"\n                        name=\"paymentMethod\"\n                        type=\"radio\"\n                        className=\"form-check-input\"\n                        defaultChecked\n                        required\n                      />\n                      <label className=\"form-check-label\" htmlFor=\"credit\">\n                        Credit card\n                        <img\n                          src=\"../../images/payment/cards.webp\"\n                          alt=\"...\"\n                          className=\"ml-3\"\n                          height={26}\n                        />\n                      </label>\n                    </div>\n                  </div>\n                  <div className=\"col-md-6\">\n                    <div className=\"form-check\">\n                      <input\n                        id=\"paypal\"\n                        name=\"paymentMethod\"\n                        type=\"radio\"\n                        className=\"form-check-input\"\n                        required\n                      />\n                      <label className=\"form-check-label\" htmlFor=\"paypal\">\n                        PayPal\n                        <img\n                          src=\"../../images/payment/paypal_64.webp\"\n                          alt=\"...\"\n                          className=\"ml-3\"\n                          height={26}\n                        />\n                      </label>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"col-md-6\">\n                    <div className=\"form-check\">\n                      <input\n                        id=\"credit\"\n                        name=\"paymentMethod\"\n                        type=\"radio\"\n                        className=\"form-check-input\"\n                        defaultChecked\n                        required\n                      />\n                      <label className=\"form-check-label\" htmlFor=\"credit\">\n                        AirMiles\n                        <img\n                          src=\"../../images/payment/miles.png\"\n                          alt=\"...\"\n                          className=\"ml-3\"\n                          height={40}\n                        />\n                      </label>\n                    </div>\n                  </div>\n              </div>\n              <div className=\"btn btn-block btn-info\">\n                <button type=\"button\" className=\"btn btn-block btn-info\" onClick={() => {edit()}}>\n                <Link to={{\n        pathname: `/cart/${user}`,\n        state: { authenticated: true }\n      }} className=\"btn btn-block btn-info\">\n                  Pay Now: <b>{total} ams </b>\n                  </Link>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default CheckoutView;\n"]},"metadata":{},"sourceType":"module"}